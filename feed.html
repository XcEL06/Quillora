<!-- quillora/feed.html -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Feed - Quillora</title>
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/navbar.css">
<link rel="stylesheet" href="css/feed.css">
</head>
<body>
<nav>
  <div class="logo">Quillora</div>
  <div class="links">
    <a href="feed.html">Feed</a>
    <a href="gallery.html">Gallery</a>
    <a href="profile.html">Profile</a>
    <a href="jobs.html">Jobs</a>
  </div>
</nav>

<main>
  <section class="new-post">
    <textarea id="post-text" placeholder="Share your story, poem, or update..."></textarea>
    <button id="post-btn">Post</button>
  </section>

  <section id="feed-section">
    <h2>Your Feed</h2>
    <div id="posts"></div>
  </section>
</main>

<script type="module">
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';
const supabaseUrl = 'YOUR_SUPABASE_URL';
const supabaseAnonKey = 'YOUR_ANON_KEY';
const supabase = createClient(supabaseUrl, supabaseAnonKey);

// Post creation
document.getElementById('post-btn').addEventListener('click', async () => {
  const content = document.getElementById('post-text').value;
  const user = supabase.auth.user();
  if (!content) return alert('Post cannot be empty');
  
  await supabase.from('posts').insert([{ content, user_id: user.id }]);
  document.getElementById('post-text').value = '';
  loadPosts();
});

// Load feed
async function loadPosts() {
  const { data } = await supabase.from('posts').select('*').order('created_at', { ascending: false });
  const postsContainer = document.getElementById('posts');
  postsContainer.innerHTML = '';
  data.forEach(post => {
    const div = document.createElement('div');
    div.classList.add('post');
    div.innerHTML = `<p>${post.content}</p>`;
    postsContainer.appendChild(div);
  });
}

// Initial load
loadPosts();
</script>
</body>
</html>
